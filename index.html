<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Apogean - some knowledge base for Apogea</title>
    <link rel="icon" type="image/png" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
    <style>
        /*
        body{
            font-family: 'Jersey15', 'Comic Sans', sans-serif;
        }*/
        
    </style>
</head>
<body>
    <div id="top-menu">
        <div><img src="quickapogean.png"></div><div class="marquee"><marquee scrollamount="3" width="300px">browse it like it's 2003</marquee></div><div></div>
    </div>
    <div id="sidebar">
        <h3>General</h3>
        <div class="menu-item" onclick="openContent('welcome.html')">
            <img src="Images/haticon.png" alt="Welcome">
            <span>Welcome</span>
        </div></a>
        <div class="menu-item" onclick="openContent('play.html')">
            <img src="Images/mageicon.png" alt="Play Apogea">
            <span>Play Apogea</span>
        </div>
        <div class="menu-item" onclick="openContent('guides.html')">
            <img src="Images/mapicon.png" alt="3">
            <span>New Player Guides</span>
        </div>
        <h3>Tools</h3>
        <div class="menu-item" onclick="openContent('calc2.html')">
            <img src="Images/char2icon.png" alt="Character Planner">
            <span class="menu-promo">Character Planner</span>
        </div>
        <div class="menu-item" onclick="openContent('traits2.html')">
            <img src="Images/trait2icon.png" alt="New Traits">
            <span>Trait Tree</span>
        </div>
        <div class="menu-item" onclick="openContent('exptable.html')">
            <img src="Images/tableicon.png" alt="Exp">
            <span>Experience Table</span>
        </div>
        <div class="menu-item" onclick="openContent('quickcalc.html')">
            <img src="Images/calcicon.png" alt="Quick Calcs">
            <span>Quick Calculators</span>
        </div>
        <div class="menu-item" onclick="openContent('map.html')">
            <img src="Images/mapicon.png" alt="Map">
            <span class="menu-promo">Interactive Map</span>
        </div>
        <div class="menu-item" onclick="openContent('houses.html')">
            <img src="Images/house.png" alt="Map">
            <span class="menu-promo">Houses Map</span>
        </div>
        <h3>Lists</h3>
        <div class="menu-item" onclick="openContent('classes.html', 'all', 'all')">
            <img src="Images/classicon.png" alt="Items">
            <span>Classes</span>
        </div>
        <div class="menu-item" onclick="openContent('monsters.html')">
            <img src="Images/spider3.png" alt="Monsters">
            <span class="menu-promo">Monsters & Loot</span>
        </div>
        <div class="menu-item" onclick="openContent('spells.html', 'all', 'all')">
            <img src="Items/RedSpellbook.png" alt="Items">
            <span>Spells</span>
        </div>
        <div class="menu-item" onclick="openContent('premium.html', 'prem', 'prem')">
            <img src="Images/goldenicon.png" alt="Items">
            <span>Premium / Prices</span>
        </div>
        <div class="menu-item" onclick="openContent('formulae.html', 'formulae', 'formulae')">
            <img src="Images/mathicon.png" alt="Items">
            <span>Formulae</span>
        </div>
        
        <h3>Articles</h3>
        <div class="menu-item" onclick="openContent('attackspeed.html', 'articles', 'articles')">
            <img src="Images/aspdicon.png" alt="Attackspeed">
            <span>Attack Speed?</span>
        </div>
        <div class="menu-item" onclick="openContent('armor.html', 'articles', 'articles')">
            <img src="Images/char3icon.png" alt="Armor">
            <span>Armor - examples</span>
        </div>
        
        <h3>Items</h3>
        <div class="menu-item" onclick="openContent('items.html', 'sword','sword')">
            <img src="Items/Broadsword.png" alt="Swords">
            <span>Swords</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'dagger', 'dagger')">
            <img src="Items/SilverDagger.png" alt="Daggers">
            <span>Daggers</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'bow', 'bow')">
            <img src="Items/Longbow.png" alt="Bows">
            <span>Bows</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'staff', 'staff')">
            <img src="Items/WoodenStaff.png" alt="Staves & Wands">
            <span>Staves & Wands</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'shield', 'shield')">
            <img src="Items/TowerShield.png" alt="Shields">
            <span>Shields</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'orb', 'orb')">
            <img src="Items/Orb.png" alt="Orbs">
            <span>Orbs</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'gloves', 'gloves')">
            <img src="Items/LeatherGloves.png" alt="Gloves">
            <span>Gloves</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'helmet', 'mask')">
            <img src="Items/Spangenhelm.png" alt=">Helmets & Masks">
            <span>Helmets & Masks</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'chest', 'chest')">
            <img src="Items/PlatedCuirass.png" alt="Armors">
            <span>Armors</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'legs', 'legs')">
            <img src="Items/BrassLegs.png" alt="Legs">
            <span>Legs</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'boots', 'boots')">
            <img src="Items/LeatherBoots.png" alt="Boots">
            <span>Boots</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'neck', 'neck')">
            <img src="Items/SilverAmulet.png" alt="Neck items">
            <span>Neck items</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', 'ring', 'ring')">
            <img src="Items/GoldenRing.png" alt="Rings">
            <span>Rings</span>
        </div>
        <div class="menu-item" onclick="openContent('items.html', '', '')">
            <img src="Images/exclamationicon.png" alt="All Items">
            <span>All Items</span>
        </div>
        <h3>Stuff</h3>
        <!--
        <div class="menu-item" onclick="openContent('calc.html')">
            <img src="Images/char2icon.png" alt="Calc">
            <span>Old Character Calc</span>
        </div>
        <div class="menu-item" onclick="openContent('traits.html')">
            <img src="Images/traiticon.png" alt="Traits">
            <span>Feb25 Trait Calculator</span>
        </div>
        -->
        <div class="menu-item" onclick="openContent('credits.html')">
            <img src="Images/question2icon.png" alt="Credits">
            <span>Changelog & Credits</span>
        </div>
    </div>
    <div id="content">
        <iframe id="content-frame" src="about:blank" frameborder="0" style="width: 100%; height: 90vh;"></iframe>
    </div>

    <script>
        function openContent(page, filter1 = '', filter2 = '') {
            const iframe = document.getElementById('content-frame');
            const currentParams = new URLSearchParams(window.location.search);
            //console.log("B1"+currentParams);
            const filterParams = new URLSearchParams();

            if (filter1) filterParams.set('filter1', filter1);
            if (filter2) filterParams.set('filter2', filter2);
            // Preserve calc.html-specific parameters
            if (page === 'calc.html' || 'traits.html' || 'traits2.html') {
                ['level', 'available', 'class', 'items', 'points', 'traits', 'tt'].forEach(param => {
                    if (currentParams.has(param)) {
                        //console.log("param sending:"+param);
                        filterParams.set(param, currentParams.get(param));
                    }
                });
                //console.log("X1 "+currentParams);
                //if key includes "skill" then send it
                currentParams.forEach((value, key) => {
                    if (key.includes("skill")) {
                        //console.log("key sending:"+key);
                        filterParams.set(key, value);
                    }
                });
            }

            iframe.src = `${page}?${filterParams.toString()}`;
            window.history.pushState({}, '', `?page=${page}&${filterParams.toString()}`);
        }

        function getParameterByName(name) {
            const url = new URL(window.location.href);
            return url.searchParams.get(name);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const page = getParameterByName('page') || 'welcome.html';
            const filter1 = getParameterByName('filter1') || getParameterByName('filter') || '';
            const filter2 = getParameterByName('filter2') || '';
            openContent(page, filter1, filter2);
        });
    </script>
</body>
</html>
