<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Character Planner Skeleton</title>
    <style>
        @font-face {
            font-family: 'bedstead';
            src: url('bedstead-extracondensed.otf') format('truetype');
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body, .stat-container, .stat-container > div, .levelnumber, .leveltitle {
            font-family: 'bedstead', Arial, sans-serif;
        }
        #planner-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .planner-upper {
            width: 100%;
            height: 50%;
            display: flex;
            flex-direction: row;
            border-bottom: 1px solid #000;
        }
        .planner-lower {
            width: 100%;
            height: 50%;
            border-top: 1px solid #000;
            display: flex;
            align-items: stretch;
            justify-content: stretch;
        }
        /* Upper columns */
        .upper-col1 {
            width: 20%;
            height: 100%;
            border-right: 1px solid #000;
            display: flex;
            flex-direction: column;
        }
        .upper-col1-segment {
            width: 100%;
            border-bottom: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1em;
        }
        .class-choice { height: 50%; }
        .level-choice { height: 15%; }
        .stat-counter { height: 15%; }
        .trait-counter { height: 15%; border-bottom: none; }
        .upper-dynamic-cell {
            width: 80%;
            height: 100%;
            border-left: 1px solid #000;
            display: flex;
        }
        .upper-col2 {
            width: 55%;
            height: 100%;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #000;
        }
        .upper-col2-row1 {
            width: 100%;
            height: 69%;
            display: flex;
            border-bottom: 1px solid #000;
        }
        .upper-col2-row1-equip {
            width: 69%;
            height: 100%;
            border-right: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .upper-col2-row1-desc {
            width: 31%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .upper-col2-row2 {
            width: 100%;
            height: 29%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .upper-col3 {
            width: 25%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-left: 1px solid #000;
        }
        /* Lower segment */
        .stats-table-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #000;
        }
        .class-choice-row {
            display: flex;
            align-items: center;
            border: 1px solid #aaa;
            margin: 2px 0;
            padding: 4px;
            cursor: pointer;
            background: #222;
            color: #fff;
            transition: background 0.2s;
        }
        .class-choice-row.selected {
            background: #eaff8c;
            color: #222;
            border: 2px solid #eaff8c;
        }
        .class-choice-row img {
            width: 32px;
            height: 32px;
            margin-right: 10px;
        }
        .level-choice-inner {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .leveltitle {
            margin-bottom: 5px;
            color: #fff;
        }
        .levelnumber {
            width: 80px;
            height: 40px;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            border: 1px solid #aaa;
            border-radius: 8px;
            background-color: #222;
            color: #eaff8c;
        }
        .stat-table-outer {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .stat-container {
            display: grid;
            grid-template-columns: 120px 100px 50px 40px 40px 40px 140px 140px 100px 100px;
            gap: 0px;
            width: 900px;
            margin-bottom: 0px;
            border-bottom: 1px solid #333;
            margin-top: 2px;
        }
        .stat-container > div {
            padding: 1px;
            border: 0px solid black;
            text-align: center;
        }
        .item-grid {
            display: grid;
            grid-template-columns: repeat(3, 48px);
            grid-template-rows: repeat(4, 48px);
            gap: 5px;
            margin-left: 20px;
        }
        .item-slot {
            width: 48px;
            height: 48px;
            border: 2px solid rgb(54, 54, 54);
            border-radius: 4px;
            background-color: rgb(36, 0, 0);
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
<div id="planner-container">
    <div class="planner-upper">
        <div class="upper-col1">
            <div class="upper-col1-segment class-choice">
                <div style="width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-evenly;align-items:stretch;">
                    <div class="class-choice-row" data-class="Squire"><img src="squire.png" alt="Squire"> Squire</div>
                    <div class="class-choice-row" data-class="Knight"><img src="knight.png" alt="Knight"> Knight</div>
                    <div class="class-choice-row" data-class="Rogue"><img src="rogue.png" alt="Rogue"> Rogue</div>
                    <div class="class-choice-row" data-class="Mage"><img src="mage.png" alt="Mage"> Mage</div>
                </div>
            </div>
            <div class="upper-col1-segment level-choice">
                <div class="level-choice-inner">
                    <label class="leveltitle" for="level-input">Character Level:</label>
                    <input class="levelnumber" type="number" id="level-input" min="1" max="100" value="1">
                </div>
            </div>
            <div class="upper-col1-segment stat-counter">Stat Counter</div>
            <div class="upper-col1-segment trait-counter">Trait Counter</div>
        </div>
        <div class="upper-dynamic-cell">
            <div id="upper-dynamic-content" style="width: 100%; height: 100%; display: flex; flex-direction: row;">
                <div class="upper-col2">
                    <div class="upper-col2-row1">
                        <div class="upper-col2-row1-equip">
                            <div class="item-grid">
                                <div class="item-slot" data-slot="neck"></div>
                                <div class="item-slot" data-slot="head"></div>
                                <div class="item-slot" data-slot="bagslot"></div>
                                <div class="item-slot" data-slot="hand"></div>
                                <div class="item-slot" data-slot="chest"></div>
                                <div class="item-slot" data-slot="hand"></div>
                                <div class="item-slot" data-slot="ring"></div>
                                <div class="item-slot" data-slot="legs"></div>
                                <div class="item-slot" data-slot="bagslot"></div>
                                <div class="item-slot-x" data-slot="NONE"></div>
                                <div class="item-slot" data-slot="boots"></div>
                            </div>
                        </div>
                        <div class="upper-col2-row1-desc">Description</div>
                    </div>
                    <div class="upper-col2-row2">Big Cell</div>
                </div>
                <div class="upper-col3">Item Picker</div>
            </div>
        </div>
    </div>
    <div class="planner-lower">
        <div class="stats-table-container" id="stats-table-container">
            <!-- Stats table will be generated here by JS -->asdasd
        </div>
    </div>
</div>
<script>
        // --- Class selection logic ---
        const classRows = [
            { name: "Squire", icon: "squire.png" },
            { name: "Knight", icon: "knight.png" },
            { name: "Rogue", icon: "rogue.png" },
            { name: "Mage", icon: "mage.png" }
        ];
        let selectedClass = null;
        let selectedLevel = 1;
        window.addEventListener('DOMContentLoaded', function() {
            // Make class rows selectable
            document.querySelectorAll('.class-choice-row').forEach(row => {
                row.addEventListener('click', function() {
                    document.querySelectorAll('.class-choice-row').forEach(r => r.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedClass = this.getAttribute('data-class');
                    updateDebug();
                });
            });
            // Level input
            const levelInput = document.getElementById('level-input');
            levelInput.addEventListener('input', function() {
                let val = parseInt(this.value) || 1;
                if(val < 1) val = 1;
                if(val > 100) val = 100;
                this.value = val;
                selectedLevel = val;
                updateDebug();
            });
            // Set default selection
            document.querySelector('.class-choice-row[data-class="Squire"]').click();
        });
        function updateDebug() {
            document.getElementById('stats-table-container').innerText =
                `Selected class: ${selectedClass || ''}\nLevel: ${selectedLevel}`;
        }
    </script>
<script>
// --- Item Database ---

        const items = [
            //comment the variable names
            //name, slot, type, weight, range, damage, HP, Mp, skill, magic, armor, defense, moveSpeed, attackSpeed, emptyholder, equipSize, description, image
            ["Black Bag","bagslot","container",80,,,,,,,,,,,,,,,"","BlackBag.png",""],
["Black Bag","bagslot","container",64,,,,,,,,,,,,,,,"","BlackBag.png","uncommon"],
["Blue Backpack","bagslot","container",160,,,,,,,,,,,,,,,"<empty>","BlueBackpack.png",""],
["Bone Bow","hand","bow",200,37,10,,,,,,,,4,,8,,,"A magic bow.","BoneBow.png",""],
["Bone Knife","hand","dagger",160,,9,,,,,,,,1,,3,,,"","BoneKnife.png",""],
["Bone Knife","hand","dagger",96,,11,,,,,,,,3,,3,,,"","BoneKnife.png","epic"],
["Bone Knife","hand","dagger",80,1,12,,,,,,,,4,,3,,,"","BoneKnife.png","legendary"],
["Brass Legs","legs","heavylegs",470,,,,,,,5,,,,,,,,"","BrassLegs.png",""],
["Brass Legs","legs","heavylegs",376,,,,,,,5,,,,,,,,"","BrassLegs.png","uncommon"],
["Brass Plate","chest","heavychest",790,,,,,,,10,,,,,,,,"","BrassPlate.png",""],
["Brass Shield","hand","lightshield",200,,,,,,,,15,,,,3,,,"Surprisingly light.","BrassShield.png",""],
["Brass Shield","hand","lightshield",140,,,,,,,,19,,,,3,,,"Surprisingly light.","BrassShield.png","rare"],
["Brass Shield","hand","lightshield",120,,,,,,,,21,,,,3,,,"Surprisingly light.","BrassShield.png","epic"],
["Brass Shield","hand","lightshield",120,,,,,,,,21,,,,3,,,"Surprisingly light.","BrassShield.png","legendary"],
["Brigandine Legs","legs","lightlegs",304,,,18,,1,,6,,,,,,,,"","BrigandineLegs.png","uncommon"],
["Brigandine Legs","legs","lightlegs",228,,,21,,3,,8,,,,,,,,"","BrigandineLegs.png","epic"],
["Brigandine Vest","chest","lightchest",580,,,20,,2,,8,,,,,,,,"","BrigandineVest.png",""],
["Broadsword","hand","sword",750,2,28,,,,,,7,,-2,,8,,,"","Broadsword.png",""],
["Broadsword","hand","sword",750,2,33,,,,,,7,,-2,,8,,,"","Broadsword.png","uncommon"],
["Broadsword","hand","sword",750,2,36,,,,,,8,,-1,,8,,,"","Broadsword.png","rare"],
["Broadsword","hand","sword",750,2,39,,,,,,9,,,,8,,,"","Broadsword.png","epic"],
["Brown Backpack","bagslot","container",160,,,,,,,,,,,,,,,"","BrownBackpack.png",""],
["Buckler","hand","lightshield",160,,,,,,,,10,,,,3,,,"","Buckler.png",""],
["Buckler","hand","lightshield",128,,,,,,,,12,,,,3,,,"","Buckler.png","uncommon"],
["Buckler","hand","lightshield",96,,,,,,,,16,,,,3,,,"","Buckler.png","epic"],
["Burlap Hat","head","lighthelmet",100,,,,50,-2,-2,1,,,,,,,,"","BurlapHat.png",""],
["Burlap Skirt","legs","lightlegs",200,,,,100,-5,-5,3,,,,,,,,"","BurlapSkirt.png",""],
["Chain Mail","chest","heavychest",810,,,,,,,8,,,,,,,,"","ChainMail.png",""],
["Chain Mail","chest","heavychest",648,,,,,,,8,,,,,,,,"","ChainMail.png","uncommon"],
["Chain Mail","chest","heavychest",567,,,,,,,9,,,,,,,,"","ChainMail.png","rare"],
["Chain Mail","chest","heavychest",405,,,,,,,11,,,,,,,,"","ChainMail.png","legendary"],
["Cloth Pants","legs","lightlegs",80,,,,,,,1,,,,,,,,"","ClothPants.png",""],
["Cloth Pants","legs","lightlegs",64,,,,,,,1,,,,,,,,"","ClothPants.png","uncommon"],
["Cloth Pants","legs","lightlegs",56,,,,,,,1,,,,,,,,"","ClothPants.png","rare"],
["Cloth Pants","legs","lightlegs",48,,,,,,,1,,,,,,,,"","ClothPants.png","epic"],
["Cloth Vest","chest","lightchest",200,,,,,,,2,,,,,,,,"","ClothVest.png",""],
["Cloth Vest","chest","lightchest",160,,,,,,,2,,,,,,,,"","ClothVest.png","uncommon"],
["Cloth Vest","chest","lightchest",140,,,,,,,3,,,,,,,,"","ClothVest.png","rare"],
["Cloth Vest","chest","lightchest",120,,,,,,,3,,,,,,,,"","ClothVest.png","epic"],
["Cloth Vest","chest","lightchest",100,,,,,,,3,,,,,,,,"","ClothVest.png","legendary"],
["Crowbar","hand","tools",130,,3,,,,,,,,,,4,,,"","Crowbar.png",""],
["Crowbar","hand","tools",104,,3,,,,,,,,,,4,,,"","Crowbar.png","uncommon"],
["Crowbar","hand","tools",91,,4,,,,,,,,,,4,,,"","Crowbar.png","rare"],
["Crystal Ring","ring","ring",8,,,,,,2,,,,,,,,,"","CrystalRing.png",""],
["Crystal Ring","ring","ring",6,,,,,,3,,,,,,,,,"","CrystalRing.png","rare"],
["Crystal Ring","ring","ring",5,,,,,,4,,,,,,,,,"","CrystalRing.png","epic"],
["Crystal Staff","hand","staff",200,37,10,,,,,,,,1,,8,,,"A light staff.","CrystalStaff.png",""],
["Crystal Staff","hand","staff",160,42,12,,,,,,,,1,,8,,,"A light staff.","CrystalStaff.png","uncommon"],
["Crystal Staff","hand","staff",140,44,13,,,,,,,,2,,8,,,"A light staff.","CrystalStaff.png","rare"],
["Crystal Staff","hand","staff",120,47,14,,,,,,,,3,,8,,,"A light staff.","CrystalStaff.png","epic"],
["Cutlass","hand","sword",450,2,25,,,,,,3,,3,,6,,,"A sailor’s sword.","Cutlass.png",""],
["Dark Hood","head","lighthelmet",60,,,-10,,3,,2,,,,,,,,"A hood longs for life.","DarkHood.png",""],
["Dark Hood","head","lighthelmet",42,,,-7,,4,,2,,,,,,,,"A hood longs for life.","DarkHood.png","rare"],
["Dark Hood","head","lighthelmet",36,,,-7,,5,,2,,,,,,,,"A hood longs for life.","DarkHood.png","epic"],
["Dark Robe","chest","lightchest",160,,,-35,,,4,4,,,,,,,,"The robe longs for life.","DarkRobe.png",""],
["Dark Robe","chest","lightchest",128,,,-28,,,4,4,,,,,,,,"The robe longs for life.","DarkRobe.png","uncommon"],
["Druid Hat","head","lighthelmet",95,,,40,,,1,3,,,,,,,,"","DruidHat.png",""],
["Epee","hand","sword",180,2,19,,,,,,2,,3,,6,,,"A fencing sword.","Epee.png",""],
["Epee","hand","sword",144,2,23,,,,,,2,,3,,6,,,"A fencing sword.","Epee.png","uncommon"],
["Euler Pants","legs","lightlegs",100,,,,,,2,4,,,,,,,,"","EulerPants.png",""],
["Gambeson","chest","lightchest",300,,,10,,,,5,,,,,,,,"","Gambeson.png",""],
["Gambeson","chest","lightchest",180,,,14,,,,7,,,,,,,,"","Gambeson.png","epic"],
["Garnet Ring","ring","ring",120,,,,,,,,,1,,,,,,"","GarnetRing.png",""],
["Golden Ring","ring","ring",7,,,35,,,,,,,,,,,,"","GoldenRing.png",""],
["Golden Ring","ring","ring",6,,,42,,,,,,,,,,,,"","GoldenRing.png","uncommon"],
["Golden Ring","ring","ring",5,,,45,,,,,,,,,,,,"","GoldenRing.png","rare"],
["Gray Backpack","bagslot","container",190,,,,,,,,,,,,,,,"Crafted from rough linen.","GrayBackpack.png",""],
["Green Bag","bagslot","container",80,,,,,1,,,,,,,,,,"It has a blue gem in it.","GreenBag.png",""],
["Green Bag","bagslot","container",40,,,,,4,,,,,,,,,,"It has a blue gem in it.","GreenBag.png","legendary"],
["Green Orb","hand","orb",275,,3,25,25,,3,,3,,,,2,,,"A mirror to another dimension.","GreenOrb.png",""],
["Ironsword","hand","sword",360,2,14,,,,,,2,,2,,6,,,"","Ironsword.png",""],
["Ironsword","hand","sword",288,2,16,,,,,,2,,2,,6,,,"","Ironsword.png","uncommon"],
["Ironsword","hand","sword",252,2,18,,,,,,3,,3,,6,,,"","Ironsword.png","rare"],
["Ironsword","hand","sword",216,2,19,,,,,,4,,4,,6,,,"","Ironsword.png","epic"],
["Kettle Helmet","head","heavyhelmet",350,,,,,,,3,,,,,,,,"","KettleHelmet.png",""],
["Knife","hand","dagger",80,,3,,,,,,,,3,,2,,,"","Knife.png",""],
["Knife","hand","dagger",64,,3,,,,,,,,3,,2,,,"","Knife.png","uncommon"],
["Knife","hand","dagger",56,,4,,,,,,,,4,,2,,,"","Knife.png","rare"],
["Knife","hand","dagger",48,,5,,,,,,,,5,,2,,,"","Knife.png","epic"],
["Knife","hand","dagger",40,1,6,,,,,,,,6,,2,,,"","Knife.png","legendary"],
["Leather Bascinet","head","lighthead",100,,,,,,,1,,,,,,,,"","LeatherBascinet.png",""],
["Leather Bascinet","head","lighthead",80,,,,,,,1,,,,,,,,"","LeatherBascinet.png","uncommon"],
["Leather Bascinet","head","lighthead",70,,,,,,,1,,,,,,,,"","LeatherBascinet.png","rare"],
["Leather Bascinet","head","lighthead",50,,,,,,,1,,,,,,,,"","LeatherBascinet.png","legendary"],
["Leather Boots","boots","lightboots",100,,,,,,,1,,,,,,,,"","LeatherBoots.png",""],
["Leather Boots","boots","lightboots",80,,,,,,,1,,,,,,,,"","LeatherBoots.png","uncommon"],
["Leather Boots","boots","lightboots",60,,,,,,,1,,,,,,,,"","LeatherBoots.png","epic"],
["Leather Boots","boots","lightboots",50,,,,,,,1,,,,,,,,"","LeatherBoots.png","legendary"],
["Leather Cloak","chest","lightchest",100,,,,,,,3,,,,,,,,"","LeatherCloak.png",""],
["Leather Coif","head","lighthead",140,,3,,,,,4,,,,,,,,"","LeatherCoif.png",""],
["Leather Collar","neck","lightneck",200,,,,,,,2,,,,,,,,"","LeatherCollar.png",""],
["Leather Collar","neck","lightneck",140,,,,,,,3,,,,,,,,"","LeatherCollar.png","rare"],
["Leather Collar","neck","lightneck",120,,,,,,,3,,,,,,,,"","LeatherCollar.png","epic"],
["Leather Cuisse","legs","lightlegs",290,,,,,,,2,,,,,,,,"","LeatherCuisse.png",""],
["Leather Cuisse","legs","lightlegs",322,,,,,,,2,,,,,,,,"","LeatherCuisse.png","uncommon"],
["Leather Cuisse","legs","lightlegs",203,,,,,,,3,,,,,,,,"","LeatherCuisse.png","rare"],
["Leather Cuisse","legs","lightlegs",174,,,,,,,3,,,,,,,,"","LeatherCuisse.png","epic"],
["Leather Gloves","hand","gloves",150,,3,,,4,,1,,,,,1,,,"","LeatherGloves.png",""],
["Leather Gloves","hand","gloves",105,,4,,,5,,1,,,,,1,,,"","LeatherGloves.png","rare"],
["Longbow","hand","bow",370,57,20,,,,,,,,-1,,9,,,"","Longbow.png",""],
["Longbow","hand","bow",296,64,24,,,,,,,,-1,,9,,,"","Longbow.png","uncommon"],
["Longsword","hand","sword",980,7,38,,,,,,10,,-2,,8,,,"","Longsword.png",""],
["Magician Hat","head","lighthelmet",100,,,,,,3,2,,,,,,,,"","MagicianHat.png",""],
["Merchant’s Bag","bagslot","container",550,,,10,,,,,,,,,,,,"A bag for trading.","MerchantsBag.png",""],
["Merchant’s Bag","bagslot","container",460,,,12,,,,,,,,,,,,"A bag for trading.","MerchantsBag.png","uncommon"],
["Merchant’s Bag","bagslot","container",330,,,14,,,,,,,,,,,,"A bag for trading.","MerchantsBag.png","epic"],
["Nightshade Robe","chest","lightchest",175,,,,,-5,1,7,,,,,,,,"The robe makes you feel lighter.","NightshadeRobe.png",""],
["Old Gloves","hand","gloves",100,,2,,,2,,,,,,,1,,,"","OldGloves.png",""],
["Old Gloves","hand","gloves",70,,3,,,3,,,,,,,1,,,"","OldGloves.png","rare"],
["Old Gloves","hand","gloves",60,,4,,,4,,,,,,,1,,,"","OldGloves.png","epic"],
["Orb","hand","orb",190,,,,,,2,,2,,,,2,,,"A magical orb.","Orb.png",""],
["Orb","hand","orb",152,,,,,,2,,2,,,,2,,,"A magical orb.","Orb.png",""],
["Pestilence Sword","hand","sword",850,6,50,,50,-6,4,,7,,-1,,8,,,"A magic sword.","PestilenceSword.png",""],
["Plated Cuirass","chest","heavychest",1050,,,,,,,12,,,,,,,,"","PlatedCuirass.png",""],
["Plated Helmet","head","heavyhelmet",350,,,,,,,6,,,,,,,,"","PlatedHelmet.png",""],
["Plated Helmet","head","heavyhelmet",280,,,,,,,6,,,,,,,,"","PlatedHelmet.png","uncommon"],
["Plated Legs","legs","heavylegs",700,,,,,,,7,,,,,,,,"","PlatedLegs.png",""],
["Plated Shield","hand","heavyshield",800,,,,,,,,20,,,,4,,,"","PlatedShield.png",""],
["Quoki Headgear","head","lightmask",45,,,-22,,,,,,,1,,,,,"Customary headpiece.","QuokiHeadgear.png",""],
["Quoki Headgear","head","lightmask",40,,,-20,,,,,,,1,,,,,"Customary headpiece.","QuokiHeadgear.png","uncommon"],
["Quoki Headgear","head","lightmask",35,,,-18,,,,,,,2,,,,,"Customary headpiece.","QuokiHeadgear.png","rare"],
["Quoki Headgear","head","lightmask",30,,,-16,,,,,,,3,,,,,"Customary headpiece.","QuokiHeadgear.png","epic"],
["Quoki Shoes","boots","lightboots",50,,,-25,,,,,,1,,,,,,"Customary footwear.","QuokiShoes.png",""],
["Quoki Shoes","boots","lightboots",30,,,-16,,,,1,,3,,,,,,"Customary footwear.","QuokiShoes.png","epic"],
["Red Orb","hand","orb",210,,10,-75,,5,,,3,,,,2,,,"Evil looks through it.","RedOrb.png",""],
["Red Orb","hand","orb",168,,12,-60,,5,,,3,,,,2,,,"Evil looks through it.","RedOrb.png","uncommon"],
["Red Orb","hand","orb",147,,13,-53,,6,,,4,,,,2,,,"Evil looks through it.","RedOrb.png","rare"],
["Regeneration Ring","ring","ring",10,,,,,,,,,,,,,,,"The ring feels temporary.","RegenerationRing.png",""],
["Royal Armor","chest","heavychest",920,,,,,,,14,,,,,,,,"The royal cross is carved in its chest.","RoyalArmor.png",""],
["Royal Dagger","hand","dagger",150,1,7,,,,2,,,,4,,2,,,"A bright gem shines in its hilt.","RoyalDagger.png",""],
["Ruby Amulet","neck","necklace",15,,2,,,2,,,,,,,,,,"","RubyAmulet.png",""],
["Ruby Amulet","neck","necklace",12,,2,,,2,,,,,,,,,,"","RubyAmulet.png","uncommon"],
["Ruby Amulet","neck","necklace",11,,3,,,3,,,,,,,,,,"","RubyAmulet.png","rare"],
["Rusty Sword","hand","sword",300,2,9,,,,,,2,,2,,6,,,"","RustySword.png",""],
["Scarf","neck","lightneck",75,,,,,,,1,,,,,,,,"A very thick scarf.","Scarf.png",""],
["Scarf","neck","lightneck",53,,,,,,,1,,,,,,,,"A very thick scarf.","Scarf.png",""],
["Shovel","hand","sword?",260,,8,,,,,,2,,,,6,,,"Used to open holes.","Shovel.png",""],
["Silver Amulet","neck","necklace",20,,,,35,,,,,,,,,,,"","SilverAmulet.png",""],
["Silver Amulet","neck","necklace",16,,,,42,,,,,,,,,,,"","SilverAmulet.png","uncommon"],
["Silver Dagger","hand","dagger",70,,4,,,,,,,,4,,2,,,"For rituals.","SilverDagger.png",""],
["Silver Dagger","hand","dagger",56,,4,,,,,,,,4,,2,,,"For rituals.","SilverDagger.png","uncommon"],
["Silver Dagger","hand","dagger",49,,5,,,,,,,,5,,2,,,"For rituals.","SilverDagger.png","rare"],
["Silver Dagger","hand","dagger",42,,6,,,,,,,,6,,2,,,"For rituals.","SilverDagger.png","epic"],
["Silver Dagger","hand","dagger",35,1,7,,,,,,,,7,,2,,,"For rituals.","SilverDagger.png","legendary"],
["Silver Mask","head","lightmask",90,,,-5,10,,,1,,,,,,,,"","SilverMask.png",""],
["Silver Mask","head","lightmask",72,,,-5,12,,,1,,,,,,,,"","SilverMask.png","uncommon"],
["Silver Ring","ring","ring",10,,,,15,,,,,,,,,,,"","SilverRing.png",""],
["Silver Ring","ring","ring",8,,,,18,,,,,,,,,,,"","SilverRing.png","uncommon"],
["Simple Bag","bagslot","container",80,,,,,,,,,,,,,,,"","SimpleBag.png",""],
["Simple Bag","bagslot","container",64,,,,,,,,,,,,,,,"","SimpleBag.png","uncommon"],
["Simple Bag","bagslot","container",48,,,,,,,,,,,,,,,"","SimpleBag.png","epic"],
["Spangenhelm","head","heavyhelmet",400,,,,,,,5,,,,,,,,"","Spangenhelm.png",""],
["Spangenhelm","head","heavyhelmet",320,,,,,,,5,,,,,,,,"","Spangenhelm.png","uncommon"],
["Spangenhelm","head","heavyhelmet",280,,,,,,,6,,,,,,,,"","Spangenhelm.png","rare"],
["Square Bag","bagslot","container",100,,,,,,1,,,,,,,,,"","SquareBag.png",""],
["Square Bag","bagslot","container",96,,,,,,1,,,,,,,,,"","SquareBag.png","uncommon"],
["Steelsword","hand","sword",45,3,18,,,,,,4,,3,,6,,,"","Steelsword.png",""],
["Stone Shortbow","hand","bow",330,37,25,,,,,,,,,,8,,,"A sturdy small bow.","StoneShortbow.png",""],
["Stone Wand","hand","staff",900,37,13,,,,,,,,2,,8,,,"Tight on grip.","StoneWand.png",""],
["Studded Shield","hand","heavyshield",420,,,,,,,,15,,,,4,,,"","StuddedShield.png",""],
["Studded Shield","hand","heavyshield",294,,,,,,,,19,,,,4,,,"","StuddedShield.png","rare"],
["Studded Shield","hand","heavyshield",252,,,,,,,,21,,,,4,,,"","StuddedShield.png","epic"],
["Torch","hand","sword?",50,,2,,,,,,,,,,,,,"","Torch.png",""],
["Torch","hand","sword?",40,,2,,,,,,,,,,,,,"","Torch.png","uncommon"],
["Torch","hand","sword?",35,,3,,,,,,,,,,,,,"","Torch.png","rare"],
["Torch","hand","sword?",30,,4,,,,,,,,,,,,,"","Torch.png","epic"],
["Torch","hand","sword?",25,,5,,,,,,,,,,,,,"","Torch.png","legendary"],
["Tower Shield","hand","heavyshield",690,,,,,,,,25,,,,4,,,"A royal shield.","TowerShield.png",""],
["Winged Boots","boots","lightboots",100,,,,,,,,-10,5,,,,,,"These loose boots seem to make you lighter.","WingedBoots.png",""],
["Wizard Hat","head","lighthelmet",60,,,,75,,1,1,,,,,,,,"A pointy hat.","WizardHat.png",""],
["Wooden Bow","hand","bow",290,47,15,,,,,,,,,,8,,,"","WoodenBow.png",""],
["Wooden Bow","hand","bow",232,53,18,,,,,,,,,,8,,,"","WoodenBow.png","uncommon"],
["Wooden Bow","hand","bow",203,56,19,,,,,,,,,,8,,,"","WoodenBow.png","rare"],
["Wooden Bow","hand","bow",174,59,21,,,,,,,,,,8,,,"","WoodenBow.png","epic"],
["Wooden Shield","hand","heavyshield",250,,,,,,,,5,,,,4,,,"","WoodenShield.png",""],
["Wooden Staff","hand","staff",300,32,5,,,,,,,,2,,8,,,"A simple piece of wood, however, curled weirdly.","WoodenStaff.png",""],
["Wooden Staff","hand","staff",240,36,5,,,,,,,,2,,8,,,"A simple piece of wood, however, curled weirdly.","WoodenStaff.png","uncommon"],
["Wooden Staff","hand","staff",180,41,7,,,,,,,,4,,8,,,"A simple piece of wood, however, curled weirdly.","WoodenStaff.png","epic"],
["Zircon Ring","ring","ring",12,,,,,,,,,,1,,,,,"","ZirconRing.png",""],

];
// --- Stat Table Logic ---
const statList = [
    "Health", "Mana", "Magic", "Damage", "Movespeed", "Ability", "Attack Speed", "HP Regen", "MP Regen", "Range", "Armor", "Defense", "Capacity"
];
let addedPoints = {};
statList.forEach(stat => addedPoints[stat] = 0);
let availablePoints = 0;

const allocatableStats = [
    "Health", "Mana", "Magic", "Ability", "HP Regen", "MP Regen", "Capacity"
];

// Class multipliers for each stat and class
const classMultipliers = {
    Squire:    { Health: 1.00, Mana: 1.00, Magic: 1.00, Damage: 1.00, Movespeed: 1.00, Ability: 1.00, "Attack Speed": 1.00, "HP Regen": 1.00, "MP Regen": 1.00, Range: 1.00, Armor: 1.00, Defense: 1.00, Capacity: 1.00 },
    Knight:    { Health: 2.00, Mana: 0.50, Magic: 0.50, Damage: 1.00, Movespeed: 1.00, Ability: 1.25, "Attack Speed": 1.00, "HP Regen": 1.25, "MP Regen": 0.50, Range: 0.50, Armor: 1.50, Defense: 1.50, Capacity: 1.50 },
    Rogue:     { Health: 1.00, Mana: 1.25, Magic: 1.50, Damage: 1.00, Movespeed: 1.00, Ability: 1.50, "Attack Speed": 1.25, "HP Regen": 1.00, "MP Regen": 1.00, Range: 1.00, Armor: 1.00, Defense: 1.00, Capacity: 1.00 },
    Mage:      { Health: 0.75, Mana: 2.00, Magic: 2.00, Damage: 1.00, Movespeed: 1.00, Ability: 0.75, "Attack Speed": 1.00, "HP Regen": 0.75, "MP Regen": 2.00, Range: 1.00, Armor: 0.75, Defense: 0.75, Capacity: 0.75 }
};
// Point value for each allocatable stat
const pointValues = {
    Health: 5,
    Mana: 5,
    Magic: 1,
    Ability: 1,
    "HP Regen": 0.2,
    "MP Regen": 0.2,
    Capacity: 10
};
// Global stat data structure
const statData = {
    Health:      { base: 150, statBonus: 0, itemBonus: 0, traitBonus: 0, final: 150 },
    Mana:        { base: 15,  statBonus: 0, itemBonus: 0, traitBonus: 0, final: 15 },
    Magic:       { base: 0,   statBonus: 0, itemBonus: 0, traitBonus: 0, final: 0 },
    Damage:      { base: 0,   statBonus: 0, itemBonus: 0, traitBonus: 0, final: 0 },
    Movespeed:   { base: 35,  statBonus: 0, itemBonus: 0, traitBonus: 0, final: 35 },
    Ability:     { base: 0,   statBonus: 0, itemBonus: 0, traitBonus: 0, final: 0 },
    "Attack Speed": { base: 10,  statBonus: 0, itemBonus: 0, traitBonus: 0, final: 10 },
    "HP Regen":     { base: 1,   statBonus: 0, itemBonus: 0, traitBonus: 0, final: 1 },
    "MP Regen":     { base: 1,   statBonus: 0, itemBonus: 0, traitBonus: 0, final: 1 },
    Range:       { base: 15,  statBonus: 0, itemBonus: 0, traitBonus: 0, final: 15 },
    Armor:       { base: 0,   statBonus: 0, itemBonus: 0, traitBonus: 0, final: 0 },
    Defense:     { base: 0,   statBonus: 0, itemBonus: 0, traitBonus: 0, final: 0 },
    Capacity:    { base: 225, statBonus: 0, itemBonus: 0, traitBonus: 0, final: 225 }
};

// Define baseValues for each stat (used in updateStatTable)
const baseValues = {
    Health: 150,
    Mana: 15,
    Magic: 0,
    Damage: 0,
    Movespeed: 35,
    Ability: 0,
    "Attack Speed": 10,
    "HP Regen": 1,
    "MP Regen": 1,
    Range: 15,
    Armor: 0,
    Defense: 0,
    Capacity: 225
};

function updateStatData() {
    // Update statBonus from allocated points
    statData.Health.statBonus = addedPoints["Health"] * 5;
    statData.Mana.statBonus = addedPoints["Mana"] * 5;
    statData.Magic.statBonus = addedPoints["Magic"] * 1;
    statData.Ability.statBonus = addedPoints["Ability"] * 1;
    statData["HP Regen"].statBonus = addedPoints["HP Regen"] * 0.2;
    statData["MP Regen"].statBonus = addedPoints["MP Regen"] * 0.2;
    statData.Capacity.statBonus = addedPoints["Capacity"] * 10;
    // Other stats get 0 from stat allocation
    statData.Damage.statBonus = 0;
    statData.Movespeed.statBonus = 0;
    statData["Attack Speed"].statBonus = 0;
    statData.Range.statBonus = 0;
    statData.Armor.statBonus = 0;
    statData.Defense.statBonus = 0;
    // Item and trait bonuses can be set elsewhere
    // Calculate final values (with class multiplier)
    const currentClass = selectedClass || "Squire";
    for (let stat in statData) {
        const mult = classMultipliers[currentClass][stat] || 1;
        statData[stat].final = (
            statData[stat].base +
            statData[stat].statBonus +
            statData[stat].itemBonus +
            statData[stat].traitBonus
        ) * mult;
    }
}
// Example dependent stat calculation
function getBowDamage() {
    // Example: Bow Damage = Damage.final * 1.5 + Attack Speed.final * 0.5

    let value = statData["Damage"].final / (statData["Attack Speed"].final / 100);
    console.log("Bow Damage:", value);
    return value;
}
function getDPS() {
    // Example: DPS = Damage.final / Attack Speed.final
    return statData["Attack Speed"].final !== 0 ? (statData.Damage.final / statData["Attack Speed"].final) : 0;
}
// In updateStatTable, call updateStatData() before rendering
function updateStatTable() {
    const level = selectedLevel;
    const totalStatPoints = (level - 1) * 3;
    let usedPoints = 0;
    statList.forEach(stat => usedPoints += addedPoints[stat]);
    availablePoints = totalStatPoints - usedPoints;
    // Update stat counter cell
    document.querySelector('.stat-counter').innerHTML =
        `<div style='width:100%;text-align:center;'>Available: <span id='available-points'>${availablePoints}</span><br>Total: <span id='total-points'>${totalStatPoints}</span></div>`;
    // Build stat table (manual rows for each stat)
    let html = `<div class=\"stat-table-outer\">`;
    html += `<div class=\"stat-container\">
        <div>Stat</div>
        <div>Class Multiplier</div>
        <div>Base</div>
        <div>-</div>
        <div>+</div>
        <div>Pts</div>
        <div style='min-width:120px;'>Stat Calculation</div>
        <div>Stat Bonus</div>
        <div style='min-width:120px;'>Item Calculation</div>
        <div>Item Bonus</div>
    </div>`;
    const currentClass = selectedClass || "Squire";
    // Health
    html += buildStatRow("Health", baseValues["Health"], currentClass);
    // Mana
    html += buildStatRow("Mana", baseValues["Mana"], currentClass);
    // Magic
    html += buildStatRow("Magic", baseValues["Magic"], currentClass);
    // Damage
    html += buildStatRow("Damage", baseValues["Damage"], currentClass);
    // Movespeed
    html += buildStatRow("Movespeed", baseValues["Movespeed"], currentClass);
    // Ability
    html += buildStatRow("Ability", baseValues["Ability"], currentClass);
    // Attack Speed
    html += buildStatRow("Attack Speed", baseValues["Attack Speed"], currentClass);
    // HP Regen
    html += buildStatRow("HP Regen", baseValues["HP Regen"], currentClass);
    // MP Regen
    html += buildStatRow("MP Regen", baseValues["MP Regen"], currentClass);
    // Range
    html += buildStatRow("Range", baseValues["Range"], currentClass);
    // Armor
    html += buildStatRow("Armor", baseValues["Armor"], currentClass);
    // Defense
    html += buildStatRow("Defense", baseValues["Defense"], currentClass);
    // Capacity
    html += buildStatRow("Capacity", baseValues["Capacity"], currentClass);
    html += `</div>`;
    document.getElementById('stats-table-container').innerHTML = html;
}
function buildStatRow(stat, baseValue, currentClass) {
    let added = addedPoints[stat];
    let canAllocate = false;
    let classMult = 1;
    let multiplier = '';
    let pointVal = 0;
    let statCalc = '';
    let itemCalc = '';
    let statBonus = 0;
    let itemBonus = 0;
    canAllocate = allocatableStats.includes(stat);
    classMult = classMultipliers[currentClass][stat] || 1;
    multiplier = (classMult * 100).toFixed(0)+"%";
    pointVal = pointValues[stat] || 0;
    statCalc = `${baseValue}`;
    if (canAllocate && added > 0) statCalc += ` + (${added} x ${pointVal})`;
    if (canAllocate) statBonus += added * pointVal;
    statBonus = (statBonus * classMult).toFixed(2);
    // For now, itemCalc and itemBonus are always 0
    itemCalc = '0';
    itemBonus = '0';
    return `<div class=\"stat-container\">
        <div>${stat}</div>
        <div>${multiplier}</div>
        <div>${baseValue}</div>
        <div>${canAllocate && added > 0 ? `<button onclick='subtractPoint(\"${stat}\")'>-</button>` : ''}</div>
        <div>${canAllocate && (availablePoints > 0 && added < selectedLevel) ? `<button onclick='addPoint(\"${stat}\")'>+</button>` : ''}</div>
        <div>${added}</div>
        <div>${statCalc}</div>
        <div>${statBonus}</div>
        <div>${itemCalc}</div>
        <div>${itemBonus}</div>
    </div>`;
}
// Hook stat table update to level and class selection
(function() {
    const origUpdateDebug = window.updateDebug;
    window.updateDebug = function() {
        if(origUpdateDebug) origUpdateDebug();
        updateStatTable();
    };
})();
window.addEventListener('DOMContentLoaded', updateStatTable);
function addPoint(stat) {
    const level = selectedLevel;
    if (availablePoints > 0 && addedPoints[stat] < level) {
        addedPoints[stat]++;
        updateStatTable();
    }
}
function subtractPoint(stat) {
    if (addedPoints[stat] > 0) {
        addedPoints[stat]--;
        updateStatTable();
    }
}
</script>
</body>
</html>
