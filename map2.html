<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>2003 Style Website</title>
        <link rel="stylesheet" href="style.css">
        <!-- Leaflet CSS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
        <!-- Leaflet JS -->
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
        <style>
body {
  margin: 0;
  padding: 0;
  font-family: 'Bedstead', Arial, sans-serif;
  background-color: #1e1e1e;
  color: #cfcfcf;
  text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.7), -2px -2px 2px rgba(0, 0, 0, 0.3), -2px 2px 2px rgba(0, 0, 0, 0.3), 2px -2px 2px rgba(0, 0, 0, 0.3);
  overflow: hidden;
}

@font-face{
    font-family: 'Bedstead';
    src: url('bedstead-extracondensed.otf') format('truetype');
}


body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
}
#top-panel {
  width: 100vw;
  height: 50px;
  background: #222;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 32px;
  font-size: 1.2em;
  box-sizing: border-box;
}
#mouse-coords {
  font-size: 1.5em;
  font-weight: bold;
  letter-spacing: 1px;
}
#main-panel {
  display: flex;
  width: 100vw;
  height: 75%;
}
#map-container {
  width: 70vw;
  height: 100%;
  position: relative;
}
#map {
  width: 100% !important;
  height: 100% !important;
  background: black;
}
#info-panel {
  width: 25vw;
  height: 100%;
  background: #222;
  color: #fff;
  padding: 24px 18px;
  overflow-y: auto;
  overflow: hidden;
  box-shadow: -2px 0 8px rgba(0,0,0,0.2);
  z-index: 1000;
  display: block;
  box-sizing: border-box;
}
#floor-controls {
  background: #333;
  border: 2px solid #555;
  border-radius: 4px;
  padding: 12px;
  margin-bottom: 20px;
}
#floor-controls h3 {
  margin: 0 0 10px 0;
  font-size: 1.1em;
  color: #fff;
}
#floor-selector {
  width: 100%;
  padding: 8px;
  background: #444;
  color: #fff;
  border: 1px solid #666;
  border-radius: 3px;
  font-family: 'Bedstead', Arial, sans-serif;
  font-size: 1em;
}
#floor-selector option {
  background: #444;
  color: #fff;
}
#dim-strength-container {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #555;
}
#dim-strength-label {
  color: #fff;
  font-size: 0.9em;
  margin-bottom: 6px;
  display: block;
}
#dim-strength-slider {
  width: 100%;
  margin-bottom: 6px;
}
#dim-strength-value {
  color: #ccc;
  font-size: 0.8em;
  font-style: italic;
}
#offset-controls {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #555;
}
.offset-item {
  margin-bottom: 10px;
}
.offset-label {
  color: #fff;
  font-size: 0.9em;
  margin-bottom: 4px;
  display: block;
}
.offset-slider {
  width: 100%;
  margin-bottom: 4px;
}
.offset-value {
  color: #ccc;
  font-size: 0.8em;
  font-style: italic;
}
#floor-info {
  margin-top: 8px;
  font-size: 0.9em;
  color: #ccc;
  font-style: italic;
}
#info-panel h2 {
  margin-top: 0;
}
#info-panel p {
  white-space: pre-line;
  word-break: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  width: auto;
  box-sizing: border-box;
}
.leaflet-popup-content-wrapper{
  background: #1f1d1d;
  border-radius: 2px;
  border: 2px solid #000;
  min-width: 160px;
}

.leaflet-popup-content {
  background: #1f1d1d;
  color: rgb(255, 255, 255);
  margin: 5px;
  margin-top: 10px;
  margin-bottom: 10px;
  padding: 0;
  text-shadow: none;
  font-family: 'Bedstead', Arial, sans-serif;
  font-size: 1.2em;
}
.leaflet-container a.leaflet-popup-close-button{
  color: rgb(255, 255, 255);
  background: rgb(165, 45, 45);
  border-radius: 2px;
  border: 2px solid #000;
  text-shadow: none;
}
.leaflet-container a.leaflet-popup-close-button:hover{
  color: #fff;
  text-shadow: none;
}
.leaflet-marker-icon.leaflet-zoom-animated.leaflet-interactive{
  filter: drop-shadow(1px 1px 2px #ffffff) drop-shadow(-1px -1px 2px #ffffff);
}

/* Disable image blurring for sharp pixel rendering */
.leaflet-image-layer, .leaflet-layer img {
  image-rendering: -moz-crisp-edges;
  image-rendering: -webkit-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* Additional targeting for Leaflet's image overlays */
.leaflet-overlay-pane img {
  image-rendering: -moz-crisp-edges;
  image-rendering: -webkit-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}
</style>
    </head>
<body class="small">
<div id="top-panel">
  <div id="map-desc">Welcome to the Apogea Map! Explore locations and click markers for details.</div>
  <div id="mouse-coords">X: ---, Y: ---</div>
</div>
<div id="main-panel">
  <div id="map-container">
    <div id="map"></div>
  </div>
  <div id="info-panel">
    <div id="floor-controls">
      <h3>Floor Selection</h3>
      <select id="floor-selector">
        <option value="0">Floor Y0</option>
        <option value="1">Floor Y1</option>
        <option value="2">Floor Y2</option>
        <option value="3">Floor Y3</option>
        <option value="4">Floor Y4</option>
        <option value="5">Floor Y5</option>
        <option value="6">Floor Y6</option>
        <option value="7">Floor Y7</option>
        <option value="8">Floor Y8</option>
        <option value="9">Floor Y9</option>
        <option value="10">Floor Y10</option>
        <option value="11">Floor Y11</option>
        <option value="12">Floor Y12</option>
        <option value="13">Floor Y13</option>
        <option value="14">Floor Y14</option>
        <option value="15">Floor Y15</option>
        <option value="16" selected>Floor Y16</option>
        <option value="17">Floor Y17</option>
        <option value="18">Floor Y18</option>
        <option value="19">Floor Y19</option>
        <option value="20">Floor Y20</option>
        <option value="21">Floor Y21</option>
        <option value="22">Floor Y22</option>
        <option value="23">Floor Y23</option>
        <option value="24">Floor Y24</option>
        <option value="25">Floor Y25</option>
        <option value="26">Floor Y26</option>
        <option value="27">Floor Y27</option>
        <option value="28">Floor Y28</option>
        <option value="29">Floor Y29</option>
        <option value="30">Floor Y30</option>
        <option value="31">Floor Y31</option>
      </select>
      <div id="dim-strength-container">
        <label id="dim-strength-label" for="dim-strength-slider">Dim Strength:</label>
        <input type="range" id="dim-strength-slider" min="0" max="4" step="0.1" value="0.5">
        <div id="dim-strength-value">0.5 (10% per level below)</div>
      </div>
      <div id="offset-controls">
        <div class="offset-item">
          <label class="offset-label" for="horizontal-offset-slider">Horizontal Offset:</label>
          <input type="range" class="offset-slider" id="horizontal-offset-slider" min="-0.5" max="0.5" step="0.01" value="-0.25">
          <div class="offset-value" id="horizontal-offset-value">-0.5</div>
        </div>
        <div class="offset-item">
          <label class="offset-label" for="vertical-offset-slider">Vertical Offset:</label>
          <input type="range" class="offset-slider" id="vertical-offset-slider" min="-0.9" max="0.9" step="0.01" value="-0.25">
          <div class="offset-value" id="vertical-offset-value">-0.5</div>
        </div>
      </div>
      <div id="floor-info">Current: Floor Y16. Perspective view: showing layers 0-16 + preview of Y17.</div>
    </div>
    <div id="marker-info"><em>Select a marker for details.</em></div>
  </div>
</div>

<script>
  // Image size in pixels (e.g., 4000x3000)
  const imageWidth = 4000;
  const imageHeight = 4000;
    // Create the map and set the bounds
    const map = L.map('map', {
        crs: L.CRS.Simple,
        minZoom: -5,
        maxZoom: 2,
        zoomSnap: 0.1,
    });

// Floor management
const floors = {};
const floorCopies = {}; // Copies without offset for perspective effect
const imageBounds = [[0, 0], [imageHeight, imageWidth]];
let markers = [];
let currentSelectedFloor = 16;
let dimStrength = 0.5; // Default dim strength
let horizontalOffsetMultiplier = -0.5; // 0 to 0.5
let verticalOffsetMultiplier = -0.5; // 0 to 0.5

// Calculate floor bounds with configurable offsets
function calculateFloorBounds(floorNum) {
  // Calculate vertical offset: layer 16 is baseline (0 offset), others offset by 1 pixel per layer difference
  const baselineLayer = 16;
  const sourceImageVerticalOffset = parseInt(floorNum) - baselineLayer; // 1px offset in source image coordinates
  
  // Scale the offset from source image (800px) to map coordinates (4000px)
  const scaleFactor = imageHeight / 800; // 4000 / 800 = 5
  const baseVerticalOffset = 0;//sourceImageVerticalOffset * scaleFactor * -0.5;
  
  // Apply configurable offsets
  const totalVerticalOffset = baseVerticalOffset + (sourceImageVerticalOffset * verticalOffsetMultiplier * scaleFactor);
  const horizontalOffset = sourceImageVerticalOffset * horizontalOffsetMultiplier * scaleFactor;
  
  // Adjust image bounds with offsets
  return [
    [0 - totalVerticalOffset, 0 + horizontalOffset], 
    [imageHeight - totalVerticalOffset, imageWidth + horizontalOffset]
  ];
}

// Update all floor positions
function updateFloorPositions() {
  Object.keys(floors).forEach(floorNum => {
    const overlay = floors[floorNum];
    const newBounds = calculateFloorBounds(floorNum);
    overlay.setBounds(newBounds);
  });
  // Floor copies use the offset of one level lower
  Object.keys(floorCopies).forEach(floorNum => {
    const overlay = floorCopies[floorNum];
    const floorNumber = parseInt(floorNum);
    const lowerLevelOffset = floorNumber - 1;
    const copyBounds = calculateFloorBounds(lowerLevelOffset);
    overlay.setBounds(copyBounds);
  });
}

// Initialize all floor overlays
function initializeFloors() {
  const floorNumbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31'];
  
  // Sort floors by number to ensure proper stacking order
  floorNumbers.sort((a, b) => parseInt(a) - parseInt(b));
  
  floorNumbers.forEach((floorNum, index) => {
    const imageUrl = `Map/Levels/combined_y${floorNum}_minimap.png`;
    const floorBounds = calculateFloorBounds(floorNum);
    
    // Create main floor overlay (with offset)
    const overlay = L.imageOverlay(imageUrl, floorBounds, {
      opacity: 1.0,  // Full opacity, we'll use CSS filters for dimming
      interactive: false,
      zIndex: parseInt(floorNum) * 10  // Main floors: 0,10,20,30...
    });
    
    floors[floorNum] = overlay;
    
    // Create copy overlay (with offset of one level lower) for perspective effect
    const copyOverlay = L.imageOverlay(imageUrl, calculateFloorBounds(parseInt(floorNum) - 1), {
      opacity: 1.0,
      interactive: false,
      zIndex: parseInt(floorNum) * 10 + 5  // Interleave z-indexes: main=10,20,30... copy=15,25,35...
    });
    
    floorCopies[floorNum] = copyOverlay;
    
    // Set z-index after adding to map for main floors
    overlay.on('add', function() {
      setTimeout(() => {
        const element = overlay.getElement();
        if (element) {
          element.style.zIndex = parseInt(floorNum) * 10;
          element.setAttribute('data-floor', floorNum);
          element.setAttribute('data-type', 'main');
        }
      }, 10);
    });
    
    // Set z-index after adding to map for copy floors
    copyOverlay.on('add', function() {
      setTimeout(() => {
        const element = copyOverlay.getElement();
        if (element) {
          element.style.zIndex = parseInt(floorNum) * 10 + 5;
          element.setAttribute('data-floor', floorNum);
          element.setAttribute('data-type', 'copy');
        }
      }, 10);
    });
  });
  
  // Initial floor setup
  updateFloorVisibility(currentSelectedFloor);
}

// Update floor visibility based on selected floor
function updateFloorVisibility(selectedFloor) {
  const selectedFloorNum = parseInt(selectedFloor);
  
  // Remove all layers first
  Object.keys(floors).forEach(floorNum => {
    const overlay = floors[floorNum];
    const copyOverlay = floorCopies[floorNum];
    if (map.hasLayer(overlay)) {
      map.removeLayer(overlay);
    }
    if (map.hasLayer(copyOverlay)) {
      map.removeLayer(copyOverlay);
    }
  });
  
  // Add layers according to perspective rules
  Object.keys(floors).forEach(floorNum => {
    const floorNumber = parseInt(floorNum);
    const overlay = floors[floorNum];
    const copyOverlay = floorCopies[floorNum];
    
    if (floorNumber <= selectedFloorNum) {
      // Show main version (with its own offset)
      overlay.addTo(map);
      
      setTimeout(() => {
        const element = overlay.getElement();
        if (element) {
          if (floorNumber < selectedFloorNum) {
            const levelDifference = dimStrength * 1 + (selectedFloorNum - floorNumber) * dimStrength;
            const darkeningAmount = Math.min(levelDifference * 10, 90);
            element.style.filter = `brightness(${100 - darkeningAmount}%)`;
          } else {
            element.style.filter = 'brightness(100%)';
          }
          // Set z-index for proper stacking - main floors
          element.style.zIndex = floorNumber * 10;
        }
      }, 10);
      
      // Show copy version (with offset of one level lower) for layers 1 and above
      if (floorNumber >= 1) {
        copyOverlay.addTo(map);
        
        setTimeout(() => {
          const element = copyOverlay.getElement();
          if (element) {
            if (floorNumber < selectedFloorNum) {
              const levelDifference = dimStrength * 1 + (selectedFloorNum - floorNumber) * dimStrength;
              const darkeningAmount = Math.min(levelDifference * 10, 90);
              element.style.filter = `brightness(${100 - darkeningAmount}%)`;
            } else {
              element.style.filter = 'brightness(100%)';
            }
            // Set z-index for proper stacking - copy layers between main layers
            element.style.zIndex = floorNumber * 10 + 5;
          }
        }, 10);
      }
    }
    
    // Show the copy of the layer one level above the selected layer
    if (floorNumber === selectedFloorNum + 1) {
      copyOverlay.addTo(map);
      
      setTimeout(() => {
        const element = copyOverlay.getElement();
        if (element) {
          element.style.filter = 'brightness(100%)';
          element.style.zIndex = floorNumber * 10 + 5;
        }
      }, 10);
    }
  });
  
  // Update info text
  const floorInfo = document.getElementById('floor-info');
  floorInfo.textContent = `Current: Floor Y${selectedFloor}. Perspective view: showing layers ${selectedFloorNum === 0 ? '0' : '0-' + selectedFloorNum} + preview of Y${selectedFloorNum + 1}.`;
  
  currentSelectedFloor = selectedFloor;
  // Update marker visibility for the new floor
  updateMarkerVisibility(currentSelectedFloor);
}

// Update marker visibility based on selected floor
function updateMarkerVisibility(selectedFloor) {
  const selectedFloorNum = parseInt(selectedFloor);
  
  markers.forEach(marker => {
    const floorDifference = selectedFloorNum - marker.floorNumber;
    
    if (floorDifference >= 0 && floorDifference <= 6) {
      // Show markers for current floor and up to 3 levels below
      if (!map.hasLayer(marker)) {
        map.addLayer(marker);
      }
      
      // Apply fading based on floor difference
      const markerElement = marker.getElement();
      if (markerElement) {
        if (floorDifference === 0) {
          // Current floor - full opacity
          markerElement.style.opacity = '1.0';
          markerElement.style.filter = 'none';
        } else {
          // Lower floors - fade out progressively
          const opacity = 1.0 - (floorDifference * 0.11); // 12% reduction per level
          const brightness = 100 - (floorDifference * 11); // 12% darker per level
          markerElement.style.opacity = opacity.toString();
          markerElement.style.filter = `brightness(${brightness}%)`;
        }
      }
    } else {
      // Hide markers from other floors
      if (map.hasLayer(marker)) {
        map.removeLayer(marker);
      }
    }
  });
}

// Initialize floors
initializeFloors();

// Set up floor selector event handler
document.getElementById('floor-selector').addEventListener('change', function(e) {
  updateFloorVisibility(e.target.value);
});

// Set up dim strength slider event handler
document.getElementById('dim-strength-slider').addEventListener('input', function(e) {
  dimStrength = parseFloat(e.target.value);
  document.getElementById('dim-strength-value').textContent = `${dimStrength} (${(dimStrength + 1) * 10}% per level below)`;
  // Refresh the current floor visibility to apply new dim strength
  updateFloorVisibility(currentSelectedFloor);
});

// Set up offset slider event handlers
document.getElementById('horizontal-offset-slider').addEventListener('input', function(e) {
  horizontalOffsetMultiplier = parseFloat(e.target.value);
  document.getElementById('horizontal-offset-value').textContent = horizontalOffsetMultiplier.toFixed(2);
  updateFloorPositions();
});

document.getElementById('vertical-offset-slider').addEventListener('input', function(e) {
  verticalOffsetMultiplier = parseFloat(e.target.value);
  document.getElementById('vertical-offset-value').textContent = verticalOffsetMultiplier.toFixed(2);
  updateFloorPositions();
});

// Initialize marker visibility for the current floor
updateMarkerVisibility(currentSelectedFloor);

map.fitBounds(imageBounds);

// Keyboard controls
let keysPressed = {};

// WASD movement - smooth continuous movement
const moveSpeed = 2; // pixels per frame
let animationId = null;

function smoothMovement() {
  let moveX = 0;
  let moveY = 0;
  
  if (keysPressed['w']) moveY += moveSpeed;
  if (keysPressed['s']) moveY -= moveSpeed;
  if (keysPressed['a']) moveX -= moveSpeed;
  if (keysPressed['d']) moveX += moveSpeed;
  
  if (moveX !== 0 || moveY !== 0) {
    const center = map.getCenter();
    const newCenter = [center.lat + moveY, center.lng + moveX];
    map.panTo(newCenter, { animate: false, duration: 0 });
  }
  
  // Continue animation if any movement keys are pressed
  if (keysPressed['w'] || keysPressed['s'] || keysPressed['a'] || keysPressed['d']) {
    animationId = requestAnimationFrame(smoothMovement);
  } else {
    animationId = null;
  }
}

// Start smooth movement when movement keys are pressed
document.addEventListener('keydown', function(e) {
  const key = e.key.toLowerCase();
  const wasMoving = keysPressed['w'] || keysPressed['s'] || keysPressed['a'] || keysPressed['d'];
  
  keysPressed[key] = true;
  
  // Start animation if movement key pressed and not already moving
  if ((key === 'w' || key === 's' || key === 'a' || key === 'd') && !wasMoving && !animationId) {
    animationId = requestAnimationFrame(smoothMovement);
  }
  
  // Floor selection controls (unchanged)
  if (key === 'q') {
    const currentFloor = parseInt(document.getElementById('floor-selector').value);
    const newFloor = Math.max(0, currentFloor - 1);
    if (newFloor !== currentFloor) {
      document.getElementById('floor-selector').value = newFloor;
      updateFloorVisibility(newFloor);
    }
    e.preventDefault();
  } else if (key === 'e') {
    const currentFloor = parseInt(document.getElementById('floor-selector').value);
    const newFloor = Math.min(31, currentFloor + 1);
    if (newFloor !== currentFloor) {
      document.getElementById('floor-selector').value = newFloor;
      updateFloorVisibility(newFloor);
    }
    e.preventDefault();
  }
});

document.addEventListener('keyup', function(e) {
  keysPressed[e.key.toLowerCase()] = false;
});

// Add overlay window for mouse coordinates
const overlayDiv = document.createElement('div');
overlayDiv.style.position = 'fixed';
overlayDiv.style.top = '10px';
overlayDiv.style.right = '10px';
overlayDiv.style.background = 'rgba(0,0,0,0.7)';
overlayDiv.style.color = 'white';
overlayDiv.style.padding = '6px 12px';
overlayDiv.style.borderRadius = '6px';
overlayDiv.style.fontSize = '14px';
overlayDiv.style.zIndex = 1000;
overlayDiv.style.display = 'none';
overlayDiv.innerText = 'X: --, Y: --';
document.body.appendChild(overlayDiv);

map.on('mousemove', function(e) {
  const x = Math.round(e.latlng.lng);
  const y = Math.round(e.latlng.lat);
  let realCoords = TranslateToReal(x, y);
  overlayDiv.innerText = `X: ${realCoords.x}, Y: ${realCoords.y}`;
});
// Update mouse coordinates in top panel
const mouseCoordsDiv = document.getElementById('mouse-coords');
map.on('mousemove', function(e) {
  // e.latlng gives [y, x] in map CRS
  const mapX = Math.round(e.latlng.lng);
  const mapY = Math.round(e.latlng.lat);
  // Convert to real coords
  const real = TranslateToReal(mapX, mapY);
  mouseCoordsDiv.textContent = `X: ${real.x}, Y: ${real.y}`;
});

map.on('mouseout', function() {
  //overlayDiv.innerText = 'X: --, Y: --';
});

function TranslateToReal(x, y) {
  const realX = Math.round(x / 5 - 395);//0.1810 - 409);
  const realY = Math.round(y / 5 - 400);//0.159 - 282);
  return { x: realX, y: realY };
}

function TranslateToMap(x, y) {
  const mapX = Math.round((x + 405) * 5);//409) / 0.1810);
  const mapY = Math.round((y + 400) * 5);//282) / 0.159);
  return { x: mapX, y: mapY };
}

// Example info data
const infoData = {
};

function showInfoPanel(key) {
  const info = infoData[key];
  if (!info) return;
  const panel = document.getElementById('marker-info');
  // Replace newlines with <br> for proper line breaks
  const descHtml = info.description.replace(/\n/g, '<br>');
  panel.innerHTML = `<h2>${info.title}</h2><p style="white-space:pre-line;">${descHtml}</p><p><b>Coordinates:</b> X: ${info.coordinates.x}, Y: ${info.coordinates.y}, Z: ${info.coordinates.z}<br><b>Floor:</b> Y${info.coordinates.floor}</p>`;
}
function addCustomMarker(iconName, realX, realY, realZ, title, shortDesc, fullDesc) {
  //Tranform real Coords to map Coords
  const mapCoords = TranslateToMap(realX, realZ);
  // Convert realY to floor number (Y=0 is floor Y14)
  const floorNumber = realY + 14;
  
  // Create custom icon
  const icon = L.icon({
    iconUrl: iconName,
    iconSize: [32, 32],
    iconAnchor: [16, 32],
    popupAnchor: [0, -32]
  });
  // Add marker
  const marker = L.marker([mapCoords.y, mapCoords.x], { icon });
  
  // Store floor information with the marker
  marker.floorNumber = floorNumber;
  marker.realCoords = { x: realX, y: realY, z: realZ };
  
  // Track marker in the global markers array
  markers.push(marker);
  
  // Store info for the panel
  const infoKey = `${title}_${realX}_${realY}`;
  infoData[infoKey] = {
    title: title,
    description: fullDesc,
    coordinates: { x: realX, y: realY, z: realZ, floor: floorNumber }
  };

  // Add click event to show info panel directly
  marker.on('click', function() {
    showInfoPanel(infoKey);
  });
  // Bind popup with short description and link
  marker.bindPopup(
    `<b>${title}</b><br>${shortDesc}<br>`
  );
}
addCustomMarker("Icons/skull.png",-3,-4,84, 'Abandoned Mine North', 'Abandoned Mine North.'," ");
addCustomMarker("Icons/skull.png",-3,-4,26, 'Abandoned Mine South', 'Abandoned Mine South.'," ");
addCustomMarker("Icons/skull.png",-9,-2,0, 'Abandoned Village', 'Abandoned Village.'," ");
addCustomMarker("Icons/skull.png",-52,-4,96, 'Bandit Outpost', 'Bandit Outpost.'," ");
addCustomMarker("Icons/house.png",-286,-1,130, 'Basile Inn', 'Basile Inn.'," ");
addCustomMarker("Icons/cross.png",-272,-1,287, 'Basile\'s Temple', 'Basile\'s Temple.'," ");
addCustomMarker("Icons/hammer.png",-259,-2,164, 'The Blacksmith', 'The Blacksmith.'," ");
addCustomMarker("Icons/arrowpurple.png",57,-2,7, 'Blue Tunnel Entrance', 'Blue Tunnel Entrance.'," ");
addCustomMarker("Icons/arrowpurple.png",168,0,-46, 'Blue Tunnel Exit', 'Blue Tunnel Exit.'," ");
addCustomMarker("Icons/house.png",191,1,-64, 'Botanist\'s Guild', 'Botanist\'s Guild.'," ");
addCustomMarker("Icons/house.png",-145,-2,21, 'Branor\'s Farm', 'Branor\'s Farm.'," ");
addCustomMarker("Icons/housegreen.png",-113,0,75, 'The Caravan', 'The Caravan.'," ");
addCustomMarker("Icons/bag.png",-125,0,59, 'Burl, trades ale.', 'Burl, trades ale..'," ");
addCustomMarker("Icons/bag.png",-116,0,80, 'Dewey, trades food.', 'Dewey, trades food..'," ");
addCustomMarker("Icons/bag.png",-116,0,69, 'Erastus, trades archer stuff.', 'Erastus, trades archer stuff..'," ");
addCustomMarker("Icons/bag.png",-107,0,82, 'Gavin, trades rare stuff.', 'Gavin, trades rare stuff..'," ");
addCustomMarker("Icons/bag.png",-129,0,70, 'Hester, trades general goods.', 'Hester, trades general goods..'," ");
addCustomMarker("Icons/bag.png",-126,0,80, 'Opal, trades equipment.', 'Opal, trades equipment..'," ");
addCustomMarker("Icons/bag.png",-139,0,78, 'Otis, trades fish.', 'Otis, trades fish..'," ");
addCustomMarker("Icons/bag.png",-104,0,61, 'Zebulon, trades magic.', 'Zebulon, trades magic..'," ");
addCustomMarker("Icons/castle.png",-273,-2,161, 'Basile Castle', 'Basile Castle.'," ");
addCustomMarker("Icons/house.png",-332,-4,-223, 'Clothier Square', 'Clothier Square.'," ");
addCustomMarker("Icons/house.png",214,-1,-70, 'Clovi\'s Hut', 'Clovi\'s Hut.'," ");
addCustomMarker("Icons/skull.png",15,-2,2, 'Cursed Straight', 'Cursed Straight.'," ");
addCustomMarker("Icons/skull.png",-142,-6,-136, 'Death Valley', 'Death Valley.'," ");
addCustomMarker("Icons/box.png",-186,0,146, 'The Depot', 'The Depot.'," ");
addCustomMarker("Icons/skull.png",33,-4,100, 'Destroyed Outpost', 'Destroyed Outpost.'," ");
addCustomMarker("Icons/skull.png",-80,-4,204, 'Destroyed Village', 'Destroyed Village.'," ");
addCustomMarker("Icons/house.png",-184,-3,206, 'The Docks', 'The Docks.'," ");
addCustomMarker("Icons/warning2.png",117,-2,-17, 'Dorosam, the Swamp', 'Dorosam, the Swamp.'," ");
addCustomMarker("Icons/arrowgreen.png",38,-4,65, 'Dorosam Hidden Passage', 'Dorosam Hidden Passage.'," ");
addCustomMarker("Icons/dot.png",147,-2,44, 'Dorosam Port', 'Dorosam Port.'," ");
addCustomMarker("Icons/cross.png",180,0,48, 'Dorosam\'s Temple', 'Dorosam\'s Temple.'," ");
addCustomMarker("Icons/castle.png",-145,-1,186, 'Eastern Gate', 'Eastern Gate.'," ");
addCustomMarker("Icons/dot.png",14,-4,30, 'Occultists East', 'Occultists East.'," ");
addCustomMarker("Icons/arrowred.png",-26,-4,-12, 'Passage to the East', 'Passage to the East.'," ");
addCustomMarker("Icons/castle.png",-137,7,167, 'East Tower', 'East Tower.'," ");
addCustomMarker("Icons/houseblue.png",-76,-2,29, 'Edmund\'s Cottage', 'Edmund\'s Cottage.'," ");
addCustomMarker("Icons/house.png",-180,-2,-40, 'El Chad Village', 'El Chad Village.'," ");
addCustomMarker("Icons/house.png",-61,-2,58, 'Eofor\'s Hut', 'Eofor\'s Hut.'," ");
addCustomMarker("Icons/housegreen.png",42,-3,-29, 'Forsaken Village', 'Forsaken Village.'," ");
addCustomMarker("Icons/dot.png",-82,-3,94, 'The Garden', 'The Garden.'," ");
addCustomMarker("Icons/dot.png",-27,0,26, 'Goblin Hills', 'Goblin Hills.'," ");
addCustomMarker("Icons/cross.png",-313,0,-232, 'Vecan Hospital', 'Vecan Hospital.'," ");
addCustomMarker("Icons/dot.png",195,-3,-109, 'Jebidiah\'s Hut', 'Jebidiah\'s Hut.'," ");
addCustomMarker("Icons/castle.png",-273,5,191, 'King\'s Chamber', 'King\'s Chamber.'," ");
addCustomMarker("Icons/bag.png",122,-4,45, 'Jebidiah Ambush 1', 'Jebidiah Ambush 1.'," ");
addCustomMarker("Icons/dot.png",192,-5,-2, 'Jebidiah Ambush 2', 'Jebidiah Ambush 2.'," ");
addCustomMarker("Icons/dot.png",177,-2,21, 'Jebidiah Ambush 3', 'Jebidiah Ambush 3.'," ");
addCustomMarker("Icons/dot.png",-227,-4,206, 'Lurleen\'s Flower Shop', 'Lurleen\'s Flower Shop.'," ");
addCustomMarker("Icons/cross.png",-273,-4,128, 'Main Square', 'Main Square.'," ");
addCustomMarker("Icons/dot.png",135,-4,-44, 'Mary And Sal\'s', 'Mary And Sal\'s.'," ");
addCustomMarker("Icons/boletus.png",-265,-4,-244, 'Merchant Square', 'Merchant Square.'," ");
addCustomMarker("Icons/mountain.png",-272,-2,234, 'The Monastery', 'The Monastery.'," ");
addCustomMarker("Icons/house.png",-17,-4,-64, 'Mosquito Marches', 'Mosquito Marches.'," ");
addCustomMarker("Icons/dot.png",91,-4,-21, 'Mushroom Fields', 'Mushroom Fields.'," ");
addCustomMarker("Icons/housegreen.png",186,-4,-65, 'Bones Lever', 'Bones Lever.'," ");
addCustomMarker("Icons/skull.png",-17,1,79, 'Amphitere Peak', 'Amphitere Peak.'," ");
addCustomMarker("Icons/cross.png",-131,-1,209, 'Northern Outpost', 'Northern Outpost.'," ");
addCustomMarker("Icons/dot.png",-32,0,-2, 'Old Bridge', 'Old Bridge.'," ");
addCustomMarker("Icons/dot.png",98,-2,41, 'Old Village', 'Old Village.'," ");
addCustomMarker("Icons/dot.png",-54,-3,209, 'Orc Camp', 'Orc Camp.'," ");
addCustomMarker("Icons/dot.png",-66,-2,-2, 'Plain\'s Cathedral', 'Plain\'s Cathedral.'," ");
addCustomMarker("Icons/dot.png",-173,-1,231, 'Rasobar\'s Ship', 'Rasobar\'s Ship.'," ");
addCustomMarker("Icons/arrowwhite.png",-323,-2,207, 'Residency Square', 'Residency Square.'," ");
addCustomMarker("Icons/dot.png",-165,0,70, 'Road To Basile', 'Road To Basile.'," ");
addCustomMarker("Icons/bag.png",-227,0,255, 'Sabrina\'s Hut', 'Sabrina\'s Hut.'," ");
addCustomMarker("Icons/castle.png",-48,-4,-29, 'Sentinel\'s Guild', 'Sentinel\'s Guild.'," ");
addCustomMarker("Icons/box.png",-243,-4,142, 'The Sewers', 'The Sewers.'," ");
addCustomMarker("Icons/mountain.png",-79,-2,-13, 'Seymour\'s Mausoleum', 'Seymour\'s Mausoleum.'," ");
addCustomMarker("Icons/dot.png",-211,-4,169, 'Sigurd\'s Pub', 'Sigurd\'s Pub.'," ");
addCustomMarker("Icons/dot.png",-174,-4,125, 'South Gate', 'South Gate.'," ");
addCustomMarker("Icons/dot.png",-287,-2,-176, 'Storage Square', 'Storage Square.'," ");
addCustomMarker("Icons/arrowpurple.png",-235,4,-74, 'Sunskin Mountain', 'Sunskin Mountain.'," ");
addCustomMarker("Icons/dot.png",188,0,-78, 'Tansy\'s House', 'Tansy\'s House.'," ");
addCustomMarker("Icons/cross.png",-257,-4,122, 'Basile\'s Market', 'Basile\'s Market.'," ");
addCustomMarker("Icons/castle.png",-203,-3,190, 'Trader\'s Square', 'Trader\'s Square.'," ");
addCustomMarker("Icons/dot.png",179,-2,15, 'Trident Passage', 'Trident Passage.'," ");
addCustomMarker("Icons/castle.png",-215,-4,-175, 'Vecan, the Desert.', 'Vecan, the Desert..'," ");
addCustomMarker("Icons/castle.png",173,6,-9, 'Violet\'s Witch House', 'Violet\'s Witch House.'," ");
addCustomMarker("Icons/dot.png",-254,-4,-134, 'West Exit', 'West Exit.'," ");
addCustomMarker("Icons/dot.png",-202,-3,3, 'West Garden', 'West Garden.'," ");
addCustomMarker("Icons/grave.png",-273,-2,106, 'West Gate', 'West Gate.'," ");
addCustomMarker("Icons/dot.png",-341,4,260, 'West Tower', 'West Tower.'," ");
addCustomMarker("Icons/dot.png",-122,-2,21, 'Wheat Fields', 'Wheat Fields.'," ");
addCustomMarker("Icons/hammer.png",-299,-4,-217, 'Work Square', 'Work Square.'," ");
addCustomMarker("Icons/dot.png",-100,-2,-19, 'Yordin\'s Cemetery', 'Yordin\'s Cemetery.'," ");
addCustomMarker("Icons/dot.png",191,4,266, 'Ancient Tombs', 'Ancient Tombs.'," ");
addCustomMarker("Icons/bag.png",143,-2,252, 'Ancient Tree', 'Ancient Tree.'," ");
addCustomMarker("Icons/dot.png",-32,-2,139, 'Blacksmith Brean', 'Blacksmith Brean.'," ");
addCustomMarker("Icons/dot.png",189,-4,197, 'Colman\'s Kitchen', 'Colman\'s Kitchen.'," ");
addCustomMarker("Icons/dot.png",106,-4,176, 'Desecrated Church', 'Desecrated Church.'," ");
addCustomMarker("Icons/dot.png",-64,-4,115, 'Dionel Pub', 'Dionel Pub.'," ");
addCustomMarker("Icons/dot.png",174,-4,193, 'East Nordha', 'East Nordha.'," ");
addCustomMarker("Icons/houseyellow.png",148,-4,161, 'East Nordha Mines', 'East Nordha Mines.'," ");
addCustomMarker("Icons/skull.png",219,-2,204, 'Ferag Courier Stable', 'Ferag Courier Stable.'," ");
addCustomMarker("Icons/bag.png",-8,-3,160, 'Fergus\' Longhouse', 'Fergus\' Longhouse.'," ");
addCustomMarker("Icons/skull.png",72,231,-2, 'Forgotten Caves', 'Forgotten Caves.'," ");
addCustomMarker("Icons/dot.png",-90,-2,139, 'Frances\' Farms', 'Frances\' Farms.'," ");
addCustomMarker("Icons/bag.png",173,-2,225, 'Ghost Town', 'Ghost Town.'," ");
addCustomMarker("Icons/dot.png",-31,-4,163, 'Hoder\'s Tool Shop', 'Hoder\'s Tool Shop.'," ");
addCustomMarker("Icons/box.png",223,-6,166, 'The Lintcaves', 'The Lintcaves.'," ");
addCustomMarker("Icons/dot.png",173,1,160, 'Loke\'s Home', 'Loke\'s Home.'," ");
addCustomMarker("Icons/dot.png",13,0,208, 'Morrigan\'s Boutique', 'Morrigan\'s Boutique.'," ");
addCustomMarker("Icons/bag.png",31,0,158, 'Mother Shrine', 'Mother Shrine.'," ");
addCustomMarker("Icons/mountain.png",231,-2,228, 'Nordha Depot', 'Nordha Depot.'," ");
addCustomMarker("Icons/dot.png",3,0,144, 'Flower Spire', 'Flower Spire.'," ");
addCustomMarker("Icons/dot.png",77,-4,159, 'Nordha Labirynth', 'Nordha Labirynth.'," ");
addCustomMarker("Icons/dot.png",-34,-3,149, 'Nordha Market & Center', 'Nordha Market & Center.'," ");
addCustomMarker("Icons/castle.png",51,2,214, 'Nordha Mountain Path', 'Nordha Mountain Path.'," ");
addCustomMarker("Icons/dot.png",57,-4,137, 'Nordha Outlaws', 'Nordha Outlaws.'," ");
addCustomMarker("Icons/bag.png",190,-3,146, 'East Nordha Port', 'East Nordha Port.'," ");
addCustomMarker("Icons/bag.png",218,-4,187, 'Nordha Residency Village', 'Nordha Residency Village.'," ");
addCustomMarker("Icons/mountain.png",-34,-3,149, 'Nordha Town Center', 'Nordha Town Center.'," ");
addCustomMarker("Icons/dot.png",-45,-4,105, 'Plains Road', 'Plains Road.'," ");
addCustomMarker("Icons/bag.png",-48,-2,156, 'Rosel Potion Shop', 'Rosel Potion Shop.'," ");
addCustomMarker("Icons/bag.png",239,-4,202, 'Salazar Shop', 'Salazar Shop.'," ");
addCustomMarker("Icons/mountain.png",61,0,225, 'Snowy Mountains', 'Snowy Mountains.'," ");
addCustomMarker("Icons/dot.png",-36,-4,154, 'West Nordha', 'West Nordha.'," ");


</script>
</body>
</html>
